<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.teamsix.dao.AdminTheaterDao"> <!-- ## -->
	<!-- 영화관 -->
	<select id="theaterList" resultType="TheaterListVO" >     <!--id값이랑 메서드명 맞춰야함 / alias 설정(mybatis-config.xml)-->
		select theatername, count(roomsrn)`count`, location, theatersrn from Theater t left join TheaterRoom tr 
		using(theatersrn) group by theatersrn order by t.theatersrn
	</select>
	<select id="theaterCheck" parameterType="int" resultType="TheaterVO">
		select * from Theater where theatersrn=#{theatersrn}
	</select>
	<insert id="theaterInsert" parameterType="TheaterVO" >
		insert into Theater (theatername, location, manager, contactnum) values(#{theatername},#{location},#{manager},#{contactnum})
	</insert>
	<select id="theaterForm" parameterType="int" resultType="TheaterVO" > <!-- 영화관 수정하기 폼  -->
		select * from Theater where theatersrn=#{theatersrn}
	</select>
	<update id="theaterUpdate" parameterType="TheaterVO" >
		update Theater set theatername=#{theatername}, location=#{location}, manager=#{manager}, contactnum=#{contactnum} where theatersrn=#{theatersrn}
	</update>
	<delete id="theaterDelete" parameterType="int" >
		delete from Theater where theatersrn=#{theatersrn}
	</delete>
	
	<!--상영관 -->
	<select id="theaterRoomList" parameterType="int" resultType="TheaterRoomVO" >
		select * from TheaterRoom where theatersrn=#{theatersrn} order by roomsrn desc 
	</select> 
	<insert id="theaterRoomInsert" parameterType="TheaterRoomVO" >
		insert into TheaterRoom (roomname, seat_row, seat_col, theatersrn) values(#{roomname},#{seat_row},#{seat_col},#{theatersrn})
	</insert>
	<select id="theaterRoomForm" parameterType="int" resultType="TheaterRoomVO" >
		select * from TheaterRoom where roomsrn=#{roomsrn}
	</select>
	<update id="theaterRoomUpdate" parameterType="TheaterRoomVO" >
		update TheaterRoom set roomname=#{roomname}, seat_row=#{seat_row}, seat_col=#{seat_col} where roomsrn=#{roomsrn}
	</update>
	<delete id="theaterRoomDelete" parameterType="int" >
		delete from TheaterRoom where roomsrn=#{roomsrn}
	</delete>
</mapper>
	